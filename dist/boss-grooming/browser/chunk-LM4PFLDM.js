import{j as _}from"./chunk-GPIFTTO7.js";import{N as l,R as b,f as h,g as n,ga as d,ia as c,na as p,o as m,ta as g}from"./chunk-BXWDLBX3.js";function S(t,e,s){if(!e)return!0;e=e.toLowerCase();for(let a of s)if(t[a]?.toString().toLowerCase()?.includes(e))return!0;return!1}function D(t,e){return t<e?-1:t>e?1:0}var f=class t{_loading$=new n(!0);_search$=new h;_items$=new n([]);_total$=new n(0);items=[];_state={page:1,pageSize:10,searchTerm:"",startIndex:1,endIndex:10,sortColumn:"",sortDirection:""};pipe=g(_);constructor(){this._search$.pipe(c(()=>this._loading$.next(!0)),l(200),d(()=>this._search()),b(0),c(()=>this._loading$.next(!1))).subscribe(e=>{this._items$.next(e.items),this._total$.next(e.total)}),this._search$.next()}get items$(){return this._items$.asObservable()}get total$(){return this._total$.asObservable()}get loading$(){return this._loading$.asObservable()}get page(){return this._state.page}get startIndex(){return this._state.startIndex}get endIndex(){return this._state.endIndex}get pageSize(){return this._state.pageSize}get searchTerm(){return this._state.searchTerm}get sortColumn(){return this._state.sortColumn}get sortDirection(){return this._state.sortDirection}set page(e){this._set({page:e})}set startIndex(e){this._set({startIndex:e})}set endIndex(e){this._set({endIndex:e})}set pageSize(e){this._set({pageSize:e})}set searchTerm(e){this._set({searchTerm:e})}set sortColumn(e){this._set({sortColumn:e})}set sortDirection(e){this._set({sortDirection:e})}setItems(e,s){this.items=e,this._set({pageSize:s}),this._set({endIndex:s})}_set(e){Object.assign(this._state,e),this._search$.next()}_search(){let{pageSize:e,page:s,searchTerm:a,sortColumn:r,sortDirection:T}=this._state,x=Object.keys(this.items[0]),i=this.items.filter(o=>S(o,a,x));r&&(i=[...i].sort((o,$)=>{let u=D(o[r],$[r]);return T==="asc"?u:-u}));let I=i.length;this.startIndex=(s-1)*e,this.endIndex=this.startIndex+e;let v=i.slice(this.startIndex,this.endIndex);return this._loading$.next(!1),m({items:v,total:I})}static \u0275fac=function(s){return new(s||t)};static \u0275prov=p({token:t,factory:t.\u0275fac,providedIn:"root"})};export{f as a};
