import{a as Ae,b as Oe,c as ze,d as ue,e as _e,g as ge,h as fe,i as Ye,j as Ue,k as qe,l as We}from"./chunk-PWLJPELT.js";import{a as Ge}from"./chunk-LM4PFLDM.js";import{a as O}from"./chunk-PUJ4Z4WS.js";import{a as _t}from"./chunk-REJMZBHF.js";import{a as R,b as $,c as A,g as re}from"./chunk-AQ26FNH3.js";import"./chunk-6WXWUOKW.js";import{g as $e,h as ut}from"./chunk-AJJXQALJ.js";import"./chunk-LBK4LXWM.js";import{$ as Re,A as Ie,B as Te,C as De,D as Pe,E as Ne,F as Fe,G as Me,H as Ve,K as Be,L as Le,y as ce,z as ct}from"./chunk-2K5JE5LY.js";import{e as F,g as P,h as M,i as X,k as de,l as J,m as ke,n as Z,o as ee,s as te,u as dt,v as ie,w as V,x as ne}from"./chunk-JLSYBWSO.js";import{A as Ee,C as L,G as K,c as Q,e as ye,j as we,l as N,s as pt}from"./chunk-GPIFTTO7.js";import{Bb as k,Bc as Ce,Cc as o,Da as h,Dc as y,Ea as b,Ec as c,Fc as D,Gc as W,Hb as x,Hc as j,Ic as H,Jc as Se,L as S,Lc as T,Qc as d,Rc as _,Sc as oe,Tb as f,Tc as pe,_b as w,bc as me,cc as se,dc as i,ec as n,fc as g,ia as E,jc as I,mb as ve,na as mt,p as C,qb as m,qc as u,rc as p,sa as st,ta as v,uc as xe,v as G,vb as rt,wc as Y,xc as U,yc as q}from"./chunk-BXWDLBX3.js";import{a as le,b as lt}from"./chunk-WWX6BADO.js";var B=class a{constructor(t){this.http=t}register(t){return this.http.post(`${re.apiUrl}/member/register`,t).pipe(G(e=>e),S(e=>C(()=>e)))}getCustomers(){return this.http.get(`${re.apiUrl}/member/customers`).pipe(G(t=>t),S(t=>C(()=>t)))}getCustomerId(t){return this.http.get(`${re.apiUrl}/member/customers/`+t).pipe(G(e=>e),S(e=>C(()=>e)))}updateProfile(t){return this.http.patch(`${re.apiUrl}/member/customers/`+t.id,t).pipe(G(e=>e),S(e=>C(()=>e)))}updateProfileRemark(t){return this.http.patch(`${re.apiUrl}/member/customers/remark/`+t.id,t).pipe(G(e=>e),S(e=>C(()=>e)))}getCustomerRemark(t){return this.http.get(`${re.apiUrl}/member/customers/remark/`+t).pipe(G(e=>e),S(e=>C(()=>e)))}getCustomerPet(t){return this.http.get(`${re.apiUrl}/member/customers/`+t+"/pets").pipe(G(e=>e),S(e=>C(()=>e)))}static \u0275fac=function(e){return new(e||a)(st(pt))};static \u0275prov=mt({token:a,factory:a.\u0275fac,providedIn:"root"})};var vt=["standardModal"],gt=a=>({"is-invalid":a});function xt(a,t){if(a&1){let e=I();i(0,"button",35),u("click",function(){h(e);let l=p(2);return b(l.info(l.modalData.data))}),o(1," Go to Profile "),n(),i(2,"button",36),u("click",function(){h(e);let l=p(2);return b(l.payment(l.modalData.data))}),o(3," Go to payment "),n()}}function Ct(a,t){if(a&1){let e=I();i(0,"div",28)(1,"h1",29),o(2,"Register"),n(),i(3,"button",30),u("click",function(){let l=h(e).$implicit;return b(l.close("Save click"))}),n()(),i(4,"div",31)(5,"p")(6,"span",32),o(7),n()()(),i(8,"div",33)(9,"button",34),u("click",function(){let l=h(e).$implicit;return b(l.close("Save click"))}),o(10," Close "),n(),x(11,xt,4,0),n()}if(a&2){let e=p();m(7),y(e.modalData.message),m(4),w(e.isSuccess?11:-1)}}var je=class a{standardModal;modalData=null;registerForm;submit;usernameError="";contentModal="";isSuccess;formBuilder=v(ie);service=v(B);modalService=v(ce);router=v(L);ngOnInit(){this.registerForm=this.formBuilder.group({username:["",[P.required]],nickname:["",P.required],firstname:[""],lastname:[""],phone2:[""],password:[""],confirmPassword:[""],email:[""],phone1:[""]})}get form(){return this.registerForm.controls}onPhoneInput(t){this.submit=!1;let e=t.target.value.replace(/\D/g,"");e.length<=3?t.target.value=e:e.length<=6?t.target.value=`${e.slice(0,3)}-${e.slice(3)}`:t.target.value=`${e.slice(0,3)}-${e.slice(3,6)}-${e.slice(6,10)}`}validSubmit(){this.submit=!0;var t=this.registerForm.get("username")?.value.replace(/-/g,"");t.length==0?this.usernameError="Please enter a phone.":t.length<8?this.usernameError="Phone must be at least 9 characters long.":this.usernameError="",this.registerForm.valid&&this.register(this.registerForm.value)}clear(){this.submit=!1}register(t){let e=t.username.replace(/-/g,""),r=lt(le({},t),{username:e,phone1:e});this.service.register(r).pipe(E(l=>{this.isSuccess=!0;let s=(this.registerForm.get("username")?.value??"")+" : "+(l.message??"");this.open(this.standardModal,l.data,s)}),S(l=>C(()=>l))).subscribe()}open(t,e,r){this.modalData={message:r,data:e},this.modalService.open(t,{centered:!0})}info(t){this.modalService.dismissAll(),this.router.navigate(["/member/customers",t.id])}payment(t){this.modalService.dismissAll(),alert("Go to payment")}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-register"]],viewQuery:function(e,r){if(e&1&&Y(vt,5),e&2){let l;U(l=q())&&(r.standardModal=l.first)}},features:[Se([{provide:Ae,useValue:Oe}])],decls:46,vars:10,consts:[["standardModal",""],[3,"title","titleLink"],[1,"row"],[1,"col-xl-8","justify-content-center","mx-auto"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],["novalidate","",1,"row","g-3","needs-validation",3,"ngSubmit","formGroup"],[1,"col-md-12"],["for","usernameInput",1,"form-label"],[1,"text-danger"],["formControlName","username","mask","000-000-0000","type","text","id","usernameInput","maxlength","12","required","",1,"form-control",3,"input","ngClass"],[1,"invalid-feedback"],[1,"valid-feedback"],["for","nicknameInput",1,"form-label"],["formControlName","nickname","type","text","id","nicknameInput","required","",1,"form-control","form-control-lg",3,"ngClass"],["for","firstnameInput",1,"form-label"],["formControlName","firstname","type","text","id","firstnameInput",1,"form-control","form-control-lg"],["for","lastNameInput",1,"form-label"],["formControlName","lastname","type","text","id","lastNameInput",1,"form-control","form-control-lg"],["for","phoneOtherInput",1,"form-label"],["formControlName","phone2","type","text","id","phoneOtherInput",1,"form-control","form-control-lg"],[1,"row","g-3","justify-content-center","mx-auto"],[1,"col-md-12","d-flex","justify-content-between"],["type","submit",1,"btn","btn-primary","w-50","me-2"],["type","button",1,"btn","btn-light","w-50",3,"click"],["id","standard-modal","tabindex","-1","aria-labelledby","standard-modalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-header"],["id","standard-modalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-success"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light",3,"click"],["type","button",1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-success",3,"click"]],template:function(e,r){if(e&1){let l=I();g(0,"breadcrumb",1),i(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h5",6),o(6,"Form"),n()(),i(7,"div",7)(8,"form",8),u("ngSubmit",function(){return h(l),b(r.validSubmit())}),i(9,"div",9)(10,"label",10),o(11,"Phone "),i(12,"span",11),o(13,"*"),n()(),i(14,"input",12),u("input",function(he){return h(l),b(r.onPhoneInput(he))}),n(),i(15,"div",13),o(16),n(),g(17,"div",14),n(),i(18,"div",9)(19,"label",15),o(20,"Name "),i(21,"span",11),o(22,"*"),n()(),g(23,"input",16),i(24,"div",13),o(25,"Please enter a name"),n()(),i(26,"div",9)(27,"label",17),o(28,"First name"),n(),g(29,"input",18),n(),i(30,"div",9)(31,"label",19),o(32,"Last name"),n(),g(33,"input",20),n(),i(34,"div",9)(35,"label",21),o(36,"Phone Other"),n(),g(37,"input",22),n(),i(38,"div",23)(39,"div",24)(40,"button",25),o(41," Register "),n(),i(42,"button",26),u("click",function(){return h(l),b(r.clear())}),o(43," Clear "),n()()()()()()()(),x(44,Ct,12,2,"ng-template",27,0,pe)}e&2&&(f("title","Register Customer")("titleLink","/member/register"),m(8),f("formGroup",r.registerForm),m(6),f("ngClass",T(6,gt,r.submit&&r.form.username.errors)),m(2),c(" ",r.usernameError," "),m(7),f("ngClass",T(8,gt,r.submit&&r.form.nickname.errors)))},dependencies:[O,V,J,F,M,X,te,dt,ne,Z,ee,N,Q,ct,ze],encapsulation:2})};var St=(a,t)=>t.id;function yt(a,t){if(a&1){let e=I();i(0,"tr")(1,"td",14)(2,"span",15),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),o(3),n()(),i(4,"td",14)(5,"span",15),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),g(6,"ngb-highlight",16),d(7,"phone_format"),n()(),i(8,"td",14)(9,"span",15),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),g(10,"ngb-highlight",16),n()(),i(11,"td",14)(12,"span",15),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),o(13),n()(),i(14,"td",17),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),i(15,"span",18),o(16),d(17,"date_full"),n()(),i(18,"td",14)(19,"a",19),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),g(20,"i",20),n()()()}if(a&2){let e=t.$implicit,r=t.$index,l=p();m(3),y((l.page-1)*l.pageSize+(r+1)),m(3),f("result",_(7,7,e.phone))("term",l.filter),m(4),f("result",e.name)("term",l.filter),m(3),y(e.pets==null?null:e.pets.length),m(3),y(oe(17,9,e.createdDate,l.translate.currentLang))}}var He=class a{filter="";page=1;pageSize=5;searchCountries;collectionSize=0;originalData;records$;total$;tableService=v(Ge);pipe=v(we);memberService=v(B);translate=v(R);router=v(L);ngOnInit(){this.records$=this.tableService.items$,this.total$=this.tableService.total$,this.getData()}onSearch(){let t=this.search(this.filter,this.pipe);this.collectionSize=t.length,this.searchCountries=t.map(e=>le({},e)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize)}search(t,e){return t.length==0?this.originalData:this.originalData.filter(r=>{let l=t.toLowerCase();return(r.phone??"").includes(l)||(r.name??"").toLowerCase().includes(l)||(r.name??"").includes(l)||(r.firstname??"").toLowerCase().includes(l)||(r.firstname??"").includes(l)||(r.lastname??"").toLowerCase().includes(l)||(r.lastname??"").includes(l)})}getData(){this.memberService.getCustomers().pipe(E(t=>{this.originalData=t.data??[],this.tableService.setItems(this.originalData,this.pageSize),this.collectionSize=this.originalData.length,this.onSearch()}),S(t=>C(()=>t))).subscribe()}viewDetail(t){this.router.navigate(["/member/customers/detail",t])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-datatable"]],decls:38,vars:27,consts:[[3,"title","titleLink"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"mb-3","row"],[1,"col-xl-3"],["id","table-filtering-search","type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[1,"table-responsive"],[1,"table","table-enhanced","table-hover"],["scope","col",1,"text-center"],[1,"d-flex","justify-content-end",3,"pageChange","collectionSize","page","pageSize"],[1,"text-center"],[1,"table-detail-link",3,"click"],[3,"result","term"],[1,"text-center",3,"click"],[1,"table-detail-link"],["data-bs-toggle","tooltip","data-bs-original-title","View",1,"btn","btn-sm","bg-primary-subtle","me-1",3,"click"],[1,"mdi","mdi-text-box-search-outline","fs-14","text-primary"]],template:function(e,r){e&1&&(g(0,"breadcrumb",0),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),o(6,"List"),n()(),i(7,"div",6)(8,"div",7)(9,"div",8)(10,"input",9),d(11,"translate"),H("ngModelChange",function(s){return j(r.filter,s)||(r.filter=s),s}),u("ngModelChange",function(){return r.onSearch()}),n()()(),i(12,"div",10)(13,"table",11)(14,"thead")(15,"tr")(16,"th",12),o(17),d(18,"translate"),n(),i(19,"th",12),o(20),d(21,"translate"),n(),i(22,"th",12),o(23),d(24,"translate"),n(),i(25,"th",12),o(26),d(27,"translate"),n(),i(28,"th",12),o(29),d(30,"translate"),n(),i(31,"th",12),o(32),d(33,"translate"),n()()(),i(34,"tbody"),me(35,yt,21,12,"tr",null,St),n()()(),i(37,"ngb-pagination",13),H("pageChange",function(s){return j(r.page,s)||(r.page=s),s}),u("pageChange",function(){return r.onSearch()}),n()()()()()),e&2&&(f("title","Customers")("titleLink","/member/customers"),m(10),xe("placeholder",_(11,13,"search")),W("ngModel",r.filter),m(7),y(_(18,15,"no")),m(3),c(" ",_(21,17,"phone")," "),m(3),c(" ",_(24,19,"name")," "),m(3),c(" ",_(27,21,"total_pets")," "),m(3),c(" ",_(30,23,"register_date")," "),m(3),c(" ",_(33,25,"detail")," "),m(3),se(r.searchCountries),m(2),f("collectionSize",r.collectionSize),W("page",r.page),f("pageSize",r.pageSize))},dependencies:[K,Le,Be,N,V,F,M,de,O,Re,ue,A,$,_e],encapsulation:2})};var wt=(a,t)=>t.id;function Et(a,t){a&1&&(i(0,"tr")(1,"td",14)(2,"span"),o(3),d(4,"translate"),n()()()),a&2&&(m(3),y(_(4,1,"no_data")))}function kt(a,t){if(a&1&&(o(0),d(1,"translate")),a&2){let e=p().$implicit;D(" ",e.ageYear," ",_(1,2,"year")," ")}}function It(a,t){if(a&1&&(o(0),d(1,"translate")),a&2){let e=p().$implicit;D(" ",e.ageMonth," ",_(1,2,"month")," ")}}function Tt(a,t){a&1&&o(0," - ")}function Dt(a,t){if(a&1&&g(0,"ngb-highlight",17),a&2){let e=p().$implicit,r=p();f("result",e.genderTh)("term",r.filter)}}function Pt(a,t){if(a&1&&g(0,"ngb-highlight",17),a&2){let e=p().$implicit,r=p();f("result",e.genderEn)("term",r.filter)}}function Nt(a,t){if(a&1&&g(0,"ngb-highlight",17),a&2){let e=p().$implicit,r=p();f("result",e.typeNameTh)("term",r.filter)}}function Ft(a,t){if(a&1&&g(0,"ngb-highlight",17),a&2){let e=p().$implicit,r=p();f("result",e.typeNameEn)("term",r.filter)}}function Mt(a,t){if(a&1&&g(0,"ngb-highlight",17),a&2){let e=p().$implicit,r=p();f("result",e.breedNameTh)("term",r.filter)}}function Vt(a,t){if(a&1&&g(0,"ngb-highlight",17),a&2){let e=p().$implicit,r=p();f("result",e.breedNameEn)("term",r.filter)}}function Bt(a,t){if(a&1){let e=I();i(0,"tr")(1,"td",15)(2,"span",16),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),o(3),n()(),i(4,"td",15)(5,"span",16),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),g(6,"ngb-highlight",17),n()(),i(7,"td",15)(8,"span",16),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),x(9,kt,2,4)(10,It,2,4)(11,Tt,1,0),n()(),i(12,"td",15)(13,"span",16),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),x(14,Dt,1,2,"ngb-highlight",17)(15,Pt,1,2,"ngb-highlight",17),n()(),i(16,"td",15)(17,"span",16),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),x(18,Nt,1,2,"ngb-highlight",17)(19,Ft,1,2,"ngb-highlight",17),n()(),i(20,"td",15)(21,"span",16),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),x(22,Mt,1,2,"ngb-highlight",17)(23,Vt,1,2,"ngb-highlight",17),n()(),i(24,"td",15)(25,"span",16),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),o(26),n()(),i(27,"td",15)(28,"span",16),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),o(29),n()(),i(30,"td",15)(31,"a",18),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),g(32,"i",19),n()()()}if(a&2){let e=t.$implicit,r=t.$index,l=p();m(3),y(r+1),m(3),f("result",e.name)("term",l.filter),m(3),w(e.ageYear&&e.ageYear>0?9:-1),m(),w(e.ageMonth&&e.ageMonth>0?10:-1),m(),w(!e.ageYear&&!e.ageMonth?11:-1),m(3),w(l.locale()==="th"?14:15),m(4),w(l.locale()==="th"?18:19),m(4),w(l.locale()==="th"?22:23),m(4),y(e.weight),m(3),y(e.service)}}var Ke=class a{tableService=v(Ge);pipe=v(we);petService=v(fe);translate=v(R);router=v(L);localeService=v(ge);filter="";page=1;pageSize=5;searchCountries;collectionSize=0;originalData;records$;total$;locale=this.localeService.getLocale();ngOnInit(){this.records$=this.tableService.items$,this.total$=this.tableService.total$,this.getData()}onSearch(){let t=this.search(this.filter,this.pipe);this.collectionSize=t.length,this.searchCountries=t.map(e=>le({},e)).slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize)}search(t,e){return t.length==0?this.originalData:this.originalData.filter(r=>{let l=t.toLowerCase();return(r.name??"").toLowerCase().includes(l)||(r.name??"").includes(l)||(r.genderTh??"").toLowerCase().includes(l)||(r.genderTh??"").includes(l)||(r.genderEn??"").toLowerCase().includes(l)||(r.genderEn??"").includes(l)||(r.breedNameTh??"").toLowerCase().includes(l)||(r.breedNameTh??"").includes(l)||(r.breedNameEn??"").toLowerCase().includes(l)||(r.breedNameEn??"").includes(l)||(r.typeNameTh??"").toLowerCase().includes(l)||(r.typeNameTh??"").includes(l)||(r.typeNameEn??"").toLowerCase().includes(l)||(r.typeNameEn??"").includes(l)})}getData(){this.petService.getPetList().pipe(E(t=>{this.originalData=t.data??[],this.tableService.setItems(this.originalData,this.pageSize),this.collectionSize=this.originalData.length,this.onSearch()}),S(t=>C(()=>t))).subscribe()}viewDetail(t){this.router.navigate(["/member/pets/detail",t])}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-pets"]],decls:48,vars:37,consts:[[3,"title","titleLink"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"mb-3","row"],[1,"col-xl-3"],["id","table-filtering-search","type","text",1,"form-control",3,"ngModelChange","placeholder","ngModel"],[1,"table-responsive"],[1,"table","table-enhanced","table-hover"],["scope","col",1,"text-center"],[1,"d-flex","justify-content-end",3,"pageChange","collectionSize","page","pageSize"],["colspan","9",1,"text-center"],[1,"text-center"],[1,"table-detail-link",3,"click"],[3,"result","term"],["data-bs-toggle","tooltip","data-bs-original-title","View",1,"btn","btn-sm","bg-primary-subtle","me-1",3,"click"],[1,"mdi","mdi-text-box-search-outline","fs-14","text-primary"]],template:function(e,r){e&1&&(g(0,"breadcrumb",0),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),o(6,"List"),n()(),i(7,"div",6)(8,"div",7)(9,"div",8)(10,"input",9),d(11,"translate"),H("ngModelChange",function(s){return j(r.filter,s)||(r.filter=s),s}),u("ngModelChange",function(){return r.onSearch()}),n()()(),i(12,"div",10)(13,"table",11)(14,"thead")(15,"tr")(16,"th",12),o(17),d(18,"translate"),n(),i(19,"th",12),o(20),d(21,"translate"),n(),i(22,"th",12),o(23),d(24,"translate"),n(),i(25,"th",12),o(26),d(27,"translate"),n(),i(28,"th",12),o(29),d(30,"translate"),n(),i(31,"th",12),o(32),d(33,"translate"),n(),i(34,"th",12),o(35),d(36,"translate"),n(),i(37,"th",12),o(38),d(39,"translate"),n(),i(40,"th",12),o(41),d(42,"translate"),n()()(),i(43,"tbody"),x(44,Et,5,3,"tr"),me(45,Bt,33,11,"tr",null,wt),n()()(),i(47,"ngb-pagination",13),H("pageChange",function(s){return j(r.page,s)||(r.page=s),s}),u("pageChange",function(){return r.onSearch()}),n()()()()()),e&2&&(f("title","Pets")("titleLink","/pet"),m(10),xe("placeholder",_(11,17,"search")),W("ngModel",r.filter),m(7),c(" ",_(18,19,"no")," "),m(3),c(" ",_(21,21,"name")," "),m(3),c(" ",_(24,23,"age")," "),m(3),c(" ",_(27,25,"gender")," "),m(3),c(" ",_(30,27,"type")," "),m(3),c(" ",_(33,29,"breed")," "),m(3),c(" ",_(36,31,"weight_kg")," "),m(3),c(" ",_(39,33,"service")," "),m(3),c(" ",_(42,35,"detail")," "),m(3),w(r.searchCountries&&r.searchCountries.length==0?44:-1),m(),se(r.searchCountries),m(2),f("collectionSize",r.collectionSize),W("page",r.page),f("pageSize",r.pageSize))},dependencies:[K,Le,Be,N,V,F,M,de,O,Re,A,$],encapsulation:2})};var Rt=["standardModal"],ft=a=>({"is-invalid":a}),$t=(a,t)=>t.id;function At(a,t){a&1&&(i(0,"tr")(1,"td",12)(2,"span"),o(3),d(4,"translate"),n()()()),a&2&&(m(3),y(_(4,1,"no_data")))}function Ot(a,t){if(a&1&&(o(0),d(1,"translate")),a&2){let e=p().$implicit;D(" ",e.ageYear," ",_(1,2,"year")," ")}}function zt(a,t){if(a&1&&(o(0),d(1,"translate")),a&2){let e=p().$implicit;D(" ",e.ageMonth," ",_(1,2,"month")," ")}}function Gt(a,t){a&1&&o(0," - ")}function Yt(a,t){if(a&1&&o(0),a&2){let e=p().$implicit;c(" ",e.genderTh," ")}}function Ut(a,t){if(a&1&&o(0),a&2){let e=p().$implicit;c(" ",e.genderEn," ")}}function qt(a,t){if(a&1&&o(0),a&2){let e=p().$implicit;c(" ",e.typeNameTh," ")}}function Wt(a,t){if(a&1&&o(0),a&2){let e=p().$implicit;c(" ",e.typeNameEn," ")}}function jt(a,t){if(a&1&&o(0),a&2){let e=p().$implicit;c(" ",e.breedNameTh," ")}}function Ht(a,t){if(a&1&&o(0),a&2){let e=p().$implicit;c(" ",e.breedNameEn," ")}}function Qt(a,t){if(a&1){let e=I();i(0,"tr")(1,"td",13)(2,"span",14),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),o(3),n()(),i(4,"td",13)(5,"span",14),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),o(6),n()(),i(7,"td",13)(8,"span",14),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),x(9,Ot,2,4)(10,zt,2,4)(11,Gt,1,0),n()(),i(12,"td",13)(13,"span",14),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),x(14,Yt,1,1)(15,Ut,1,1),n()(),i(16,"td",13)(17,"span",14),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),x(18,qt,1,1)(19,Wt,1,1),n()(),i(20,"td",13)(21,"span",14),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),x(22,jt,1,1)(23,Ht,1,1),n()(),i(24,"td",13)(25,"span",14),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),o(26),n()(),i(27,"td",13)(28,"span",14),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),o(29),n()(),i(30,"td",13)(31,"a",15),u("click",function(){let l=h(e).$implicit,s=p();return b(s.viewDetail(l.id))}),g(32,"i",16),n()()()}if(a&2){let e=t.$implicit,r=t.$index,l=p();m(3),y(r+1),m(3),y(e.name),m(3),w(e.ageYear&&e.ageYear>0?9:-1),m(),w(e.ageMonth&&e.ageMonth>0?10:-1),m(),w(!e.ageYear&&!e.ageMonth?11:-1),m(3),w(l.locale()==="th"?14:15),m(4),w(l.locale()==="th"?18:19),m(4),w(l.locale()==="th"?22:23),m(4),y(e.weight),m(3),y(e.service)}}function Kt(a,t){if(a&1&&(i(0,"div",51),o(1),n()),a&2){let e=t.item,r=p(2);m(),c(" ",r.locale()==="th"?e.value_th:e.value_en," ")}}function Xt(a,t){if(a&1&&g(0,"img",53),a&2){let e=p().item;f("src",e.image_url,ve)}}function Jt(a,t){if(a&1&&(i(0,"div",51),x(1,Xt,1,1,"img",52),o(2),n()),a&2){let e=t.item,r=p(2);m(),f("ngIf",e.image_url),m(),c(" ",r.locale()==="th"?e.value_th:e.value_en," ")}}function Zt(a,t){if(a&1){let e=I();i(0,"div",17)(1,"h1",18),o(2,"Add pet"),n(),i(3,"button",19),u("click",function(){h(e);let l=p();return b(l.modalclose())}),n()(),i(4,"div",20)(5,"form",21)(6,"div",22)(7,"label",23),o(8,"Name "),i(9,"span",24),o(10,"*"),n()(),g(11,"input",25),i(12,"div",26),o(13),n()(),i(14,"div",22)(15,"label",27),o(16,"Type"),n(),i(17,"ng-select",28),u("change",function(l){h(e);let s=p();return b(s.onTypeChange(l))}),x(18,Kt,2,1,"ng-template",29),n()(),i(19,"div",22)(20,"label",30),o(21,"Breed"),n(),i(22,"ng-select",31),x(23,Jt,3,2,"ng-template",29),n()(),i(24,"div",22)(25,"label",32),o(26),d(27,"translate"),n(),i(28,"div",33),g(29,"input",34),i(30,"label",35),o(31),d(32,"translate"),n()(),i(33,"div",33),g(34,"input",36),i(35,"label",37),o(36),d(37,"translate"),n()()(),i(38,"div",22)(39,"label",38),o(40,"Age"),n(),i(41,"div",39)(42,"div",40)(43,"input",41),u("keydown",function(l){h(e);let s=p();return b(s.validateNumber(l))}),n(),i(44,"span",42),o(45),d(46,"translate"),n()(),i(47,"div",40)(48,"input",43),u("keydown",function(l){h(e);let s=p();return b(s.validateNumber(l))}),n(),i(49,"span",44),o(50),d(51,"translate"),n(),i(52,"div",26),o(53),n()()()(),i(54,"div",22)(55,"label",45),o(56,"Weight"),n(),i(57,"div",39)(58,"div",40),g(59,"input",46),i(60,"span",47),o(61),d(62,"translate"),n()()()()()(),i(63,"div",48)(64,"button",49),u("click",function(){h(e);let l=p();return b(l.addPet())}),o(65," Add "),n(),i(66,"button",50),u("click",function(){h(e);let l=p();return b(l.modalclose())}),o(67," Close "),n()()}if(a&2){let e=p();m(5),f("formGroup",e.petForm),m(6),f("ngClass",T(27,ft,e.submit&&e.form.name.errors)),m(2),y(e.nameError),m(4),f("items",e.petTypeList)("searchable",!0),m(5),f("items",e.filteredBreedList)("searchable",!0),m(4),y(_(27,15,"gender")),m(5),c(" ",_(32,17,"pet_male")," "),m(5),c(" ",_(37,19,"pet_female")," "),m(9),c(" ",_(46,21,"year")," "),m(3),f("ngClass",T(29,ft,e.submit&&e.form.ageMonth.errors)),m(2),c(" ",_(51,23,"month")," "),m(3),y(e.ageMonthError),m(8),c(" ",_(62,25,"weight_kg")," ")}}var Xe=class a{getNameLocale(){throw new Error("Method not implemented.")}memberService=v(B);petService=v(fe);modalService=v(ce);formBuilder=v(ie);translate=v(R);masterService=v(Ye);localeService=v(ge);router=v(L);id;standardModal;modalData=null;petForm;dataList=[];filteredBreedList=[];breedList=[];petTypeList=[];submit;locale=this.localeService.getLocale();selectType;nameError;ageMonthError;ngOnInit(){this.getData(),this.loadPetTypes(),this.loadAllBreeds()}get form(){return this.petForm.controls}getData(){this.memberService.getCustomerPet(Number(this.id)).pipe(E(t=>{this.dataList=t.data??[],S(e=>C(()=>e))})).subscribe()}viewDetail(t){this.router.navigate(["/member/pets/detail",t])}openModal(){this.petForm=this.formBuilder.group({name:["",[P.required]],ageYear:[null],ageMonth:[null,[P.max(11)]],gender:["UNKNOWN"],type:[null],breed:[null],weight:[""]}),this.modalService.open(this.standardModal,{centered:!0})}modalclose(){this.modalService.dismissAll(),this.petForm.reset(),this.submit=!1}addPet(){if(this.submit=!0,this.petForm.invalid){this.nameError=this.translate.instant("error.require.name"),this.ageMonthError=this.translate.instant("error.validate.age_month_max"),this.petForm.markAllAsTouched();return}let t={name:this.petForm.get("name")?.value,ageYear:this.petForm.get("ageYear")?.value,ageMonth:this.petForm.get("ageMonth")?.value,gender:this.petForm.get("gender")?.value,type:this.petForm.get("type")?.value,breed:this.petForm.get("breed")?.value,customerId:Number(this.id)};this.petService.addPet(t).pipe(E(e=>{this.getData(),this.modalclose()}),S(e=>C(()=>e))).subscribe()}loadPetTypes(){this.masterService.getPetTypes().pipe(E(t=>{this.petTypeList=t.data??[],this.sortPetTypes()}),S(t=>C(()=>t))).subscribe()}loadAllBreeds(){this.masterService.getPetBreeds().pipe(E(t=>{this.breedList=t.data??[],this.sortBreeds()}),S(t=>C(()=>t))).subscribe()}onTypeChange(t){t?(this.filteredBreedList=this.breedList.filter(e=>e.ref_key===t.key),this.sortBreeds()):this.filteredBreedList=[],this.petForm.get("breed")?.setValue("")}sortPetTypes(){this.petTypeList.sort((t,e)=>this.locale()==="th"?t.value_th.localeCompare(e.value_th):t.value_en.localeCompare(e.value_en)).map(t=>{t.label=this.locale()==="th"?t.value_th:t.value_en})}sortBreeds(){this.breedList.sort((t,e)=>this.locale()==="th"?t.value_th.localeCompare(e.value_th):t.value_en.localeCompare(e.value_en)).map(t=>{t.label=this.locale()==="th"?t.value_th:t.value_en})}validateNumber(t,e=!1){let r=["Backspace","ArrowLeft","ArrowRight","Tab","Enter"];if(e){!/^[0-9.]$/.test(t.key)&&!r.includes(t.key)&&t.preventDefault();let s=t.key===".",he=t.target;s&&he.value.includes(".")&&t.preventDefault()}else!/^[0-9]$/.test(t.key)&&!r.includes(t.key)&&t.preventDefault()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-customer-pet"]],viewQuery:function(e,r){if(e&1&&Y(Rt,5),e&2){let l;U(l=q())&&(r.standardModal=l.first)}},inputs:{id:"id"},decls:47,vars:28,consts:[["standardModal",""],[1,"card"],[1,"card-body"],[1,"row"],[1,"row","mb-2"],[1,"col-12"],["type","button","data-bs-toggle","modal",1,"btn","btn-primary",3,"click"],[1,"mdi","mdi-plus"],[1,"table-responsive"],[1,"table","table-enhanced","table-hover"],["scope","col",1,"text-center"],["tabindex","-1","role","dialog","aria-labelledby","standard-modalLabel","aria-hidden","true",1,"modal","fade"],["colspan","9",1,"text-center"],[1,"text-center"],[1,"table-detail-link",3,"click"],["data-bs-toggle","tooltip","data-bs-original-title","View",1,"btn","btn-sm","bg-primary-subtle","me-1",3,"click"],[1,"mdi","mdi-text-box-search-outline","fs-14","text-primary"],[1,"modal-header"],["id","standard-modalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",1,"row","g-3","needs-validation",3,"formGroup"],[1,"col-md-12"],["for","nameInput",1,"form-label"],[1,"text-danger"],["formControlName","name","type","text","id","nameInput","required","",1,"form-control","form-control-lg",3,"ngClass"],[1,"invalid-feedback"],["for","typeInput",1,"form-label"],["bindLabel","label","bindValue","key","formControlName","type",3,"change","items","searchable"],["ng-option-tmp",""],["for","breedInput",1,"form-label"],["bindLabel","label","bindValue","key","formControlName","breed",3,"items","searchable"],["for","genderInput",1,"form-label"],[1,"form-check","radio-lg"],["type","radio","formControlName","gender","id","genderRadios1","value","MALE",1,"form-check-input"],["for","genderRadios1",1,"form-check-label"],["type","radio","formControlName","gender","id","genderRadios2","value","FEMALE",1,"form-check-input"],["for","genderRadios2",1,"form-check-label"],["for","ageInput",1,"form-label"],[1,"d-flex","gap-3"],[1,"input-group"],["formControlName","ageYear","type","text","aria-label","ageYear","aria-describedby","ageYearSpan","id","ageInput",1,"form-control","form-control-lg",3,"keydown"],["id","ageYearSpan",1,"input-group-text"],["formControlName","ageMonth","type","text","aria-label","ageMonth","aria-describedby","ageMonthSpan","id","ageMonthInput",1,"form-control","form-control-lg",3,"keydown","ngClass"],["id","ageMonthSpan",1,"input-group-text"],["for","weightInput",1,"form-label"],["formControlName","weight","type","text","aria-label","weight","aria-describedby","weightSpan","id","weightInput",1,"form-control","form-control-lg"],["id","weightSpan",1,"input-group-text"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light",3,"click"],[1,"option-content"],["width","100","height","100","class","me-2 rounded-circle",3,"src",4,"ngIf"],["width","100","height","100",1,"me-2","rounded-circle",3,"src"]],template:function(e,r){if(e&1){let l=I();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"button",6),u("click",function(){return h(l),b(r.openModal())}),g(6,"i",7),o(7," Add "),n()()()(),i(8,"div",3)(9,"div",5)(10,"div",8)(11,"table",9)(12,"thead")(13,"tr")(14,"th",10),o(15),d(16,"translate"),n(),i(17,"th",10),o(18),d(19,"translate"),n(),i(20,"th",10),o(21),d(22,"translate"),n(),i(23,"th",10),o(24),d(25,"translate"),n(),i(26,"th",10),o(27),d(28,"translate"),n(),i(29,"th",10),o(30),d(31,"translate"),n(),i(32,"th",10),o(33),d(34,"translate"),n(),i(35,"th",10),o(36),d(37,"translate"),n(),i(38,"th",10),o(39),d(40,"translate"),n()()(),i(41,"tbody"),x(42,At,5,3,"tr"),me(43,Qt,33,10,"tr",null,$t),n()()()()()()(),x(45,Zt,68,31,"ng-template",11,0,pe)}e&2&&(m(15),c(" ",_(16,10,"no")," "),m(3),c(" ",_(19,12,"name")," "),m(3),c(" ",_(22,14,"age")," "),m(3),c(" ",_(25,16,"gender")," "),m(3),c(" ",_(28,18,"type")," "),m(3),c(" ",_(31,20,"breed")," "),m(3),c(" ",_(34,22,"weight_kg")," "),m(3),c(" ",_(37,24,"service")," "),m(3),c(" ",_(40,26,"detail")," "),m(3),w(r.dataList.length==0?42:-1),m(),se(r.dataList))},dependencies:[A,$,K,N,Q,ye,ne,J,F,ke,M,X,te,Z,ee,We,qe,Ue,V],encapsulation:2})};var ei=["standardModal"],Je=a=>({"is-invalid":a}),Ze=class a{constructor(t,e){this.memberService=t;this.formBuilder=e}id;standardModal;modalData=null;personalInformationForm;submit;phoneError="";phone2Error="";show1=!0;remark="";toastService=v(_t);ngOnInit(){this.getData(),this.personalInformationForm=this.formBuilder.group({name:["",[P.required]],firstname:[""],lastname:[""],phone:["",[P.required]],phone2:[""],email:["",[P.email]]})}get form(){return this.personalInformationForm.controls}getData(){this.memberService.getCustomerId(Number(this.id)).pipe(E(t=>{this.personalInformationForm.patchValue({name:t.data.name??"",firstname:t.data.firstname??"",lastname:t.data.lastname??"",phone:t.data.phone??"",phone2:t.data.phoneOther??"",email:t.data.email??""}),this.remark=t.data.remark??""}),S(t=>C(()=>t))).subscribe()}getDataRemark(){this.memberService.getCustomerRemark(Number(this.id)).pipe(E(t=>{this.remark=t.data.remark??""}),S(t=>C(()=>t))).subscribe()}reset(){this.getData()}resetRemark(){this.getDataRemark()}onPhoneInput(t){this.submit=!1}validSubmit(){this.submit=!0,this.personalInformationForm.get("phone")?.value.length==0&&(this.phoneError="Please enter a phone"),this.personalInformationForm.get("phone")?.errors?.mask!==null&&(this.phoneError="Please enter a phone format : 000-000-0000"),this.personalInformationForm.get("phone2")?.errors?.mask!==null&&(this.phone2Error="Please enter a phone 2 format: 000-000-0000"),this.personalInformationForm.valid&&this.save()}save(){let t={id:this.id,name:this.personalInformationForm.get("name")?.value,firstname:this.personalInformationForm.get("firstname")?.value,lastname:this.personalInformationForm.get("lastname")?.value,phone:this.personalInformationForm.get("phone")?.value.replace(/-/g,""),phone2:this.personalInformationForm.get("phone2")?.value.replace(/-/g,""),email:this.personalInformationForm.get("email")?.value};this.memberService.updateProfile(t).pipe(E(e=>{e.code!==200?(this.phoneError=e.message??"",this.personalInformationForm.get("phone")?.setErrors({incorrect:!0}),this.personalInformationForm.get("phone")?.markAsTouched()):this.showToast("Successfully updated profile",$e)}),S(e=>C(()=>e))).subscribe()}saveRemark(){let t={id:this.id,remark:this.remark};this.memberService.updateProfileRemark(t).pipe(E(e=>{e.code==200&&this.showToast("Successfully updated remark",$e)}),S(e=>C(()=>e))).subscribe()}showToast(t,e){e===$e?this.toastService.show({textOrTpl:t,classname:"bg-success text-white",delay:3e3}):e===ut&&this.toastService.show({textOrTpl:t,classname:"bg-danger text-white",delay:3e3})}static \u0275fac=function(e){return new(e||a)(rt(B),rt(ie))};static \u0275cmp=k({type:a,selectors:[["app-customer-about"]],viewQuery:function(e,r){if(e&1&&Y(ei,5),e&2){let l;U(l=q())&&(r.standardModal=l.first)}},inputs:{id:"id"},features:[Se([{provide:Ae,useValue:Oe}])],decls:80,vars:16,consts:[["id","customer_about","role","tabpanel",1,"tab-pane","pt-4"],[1,"row"],[1,"col-lg-6","col-xl-6"],[1,"card","border"],[1,"card-header"],[1,"row","align-items-center"],[1,"col"],[1,"card-title","mb-0"],[1,"card-body"],["novalidate","",1,"row","g-2","needs-validation",3,"formGroup"],[1,"col-md-12"],["for","nameInput",1,"form-label"],[1,"text-danger"],["formControlName","name","type","text","id","nameInput","required","",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],["for","firstnameInput",1,"form-label"],["formControlName","firstname","type","text","id","firstnameInput",1,"form-control"],["for","lastnameInput",1,"form-label"],["formControlName","lastname","type","text","id","lastnameInput",1,"form-control"],["for","phoneInput",1,"form-label"],[1,"col-lg-12","col-xl-12"],[1,"input-group"],[1,"input-group-text"],[1,"mdi","mdi-phone-outline"],["formControlName","phone","mask","000-000-0000","type","text","id","phoneInput","required","",1,"form-control",3,"input","ngClass"],["for","phone2Input",1,"form-label"],["formControlName","phone2","mask","000-000-0000","type","text","id","phone2Input",1,"form-control",3,"input","ngClass"],["for","emailInput",1,"form-label"],[1,"mdi","mdi-email"],["formControlName","email","type","email","id","emailInput",1,"form-control",3,"ngClass"],[1,"card-footer","text-end"],["type","button",1,"btn","btn-light",2,"margin-right","20px",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["id","example-textarea","rows","5",1,"form-control",3,"ngModelChange","ngModel"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h4",7),o(9,"Personal Information"),n()()()(),i(10,"div",8)(11,"form",9)(12,"div",10)(13,"label",11),o(14,"Name "),i(15,"span",12),o(16,"*"),n()(),g(17,"input",13),i(18,"div",14),o(19,"Please enter a name"),n()(),i(20,"div",10)(21,"label",15),o(22,"First Name "),n(),g(23,"input",16),n(),i(24,"div",10)(25,"label",17),o(26,"Last Name"),n(),g(27,"input",18),n(),i(28,"div",10)(29,"label",19),o(30,"Phone "),i(31,"span",12),o(32,"*"),n()(),i(33,"div",20)(34,"div",21)(35,"span",22),g(36,"i",23),n(),i(37,"input",24),u("input",function(s){return r.onPhoneInput(s)}),n(),i(38,"div",14),o(39),n()()()(),i(40,"div",10)(41,"label",25),o(42,"Phone 2"),n(),i(43,"div",20)(44,"div",21)(45,"span",22),g(46,"i",23),n(),i(47,"input",26),u("input",function(s){return r.onPhoneInput(s)}),n(),i(48,"div",14),o(49),n()()()(),i(50,"div",10)(51,"label",27),o(52,"Email"),n(),i(53,"div",20)(54,"div",21)(55,"span",22),g(56,"i",28),n(),g(57,"input",29),i(58,"div",14),o(59,"Email is invalid format"),n()()()()()(),i(60,"div",30)(61,"button",31),u("click",function(){return r.reset()}),o(62," Reset "),n(),i(63,"button",32),u("click",function(){return r.validSubmit()}),o(64," Save "),n()()()(),i(65,"div",2)(66,"div",3)(67,"div",4)(68,"div",5)(69,"div",6)(70,"h4",7),o(71,"Remark"),n()()()(),i(72,"div",8)(73,"div",10)(74,"textarea",33),H("ngModelChange",function(s){return j(r.remark,s)||(r.remark=s),s}),n()()(),i(75,"div",30)(76,"button",31),u("click",function(){return r.resetRemark()}),o(77," Reset "),n(),i(78,"button",32),u("click",function(){return r.saveRemark()}),o(79," Save "),n()()()()()()()),e&2&&(m(11),f("formGroup",r.personalInformationForm),m(6),f("ngClass",T(8,Je,r.submit&&r.form.name.errors)),m(20),f("ngClass",T(10,Je,r.submit&&r.form.phone.errors)),m(2),y(r.phoneError),m(8),f("ngClass",T(12,Je,r.submit&&r.form.phone2.errors)),m(2),y(r.phone2Error),m(8),f("ngClass",T(14,Je,r.submit&&r.form.email.errors)),m(17),W("ngModel",r.remark))},dependencies:[V,J,F,M,X,te,de,ne,Z,ee,N,Q,ze],encapsulation:2})};var et=class a{static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-customer-service-history"]],decls:2,vars:0,template:function(e,r){e&1&&(i(0,"p"),o(1,"customer-service-history works!"),n())},encapsulation:2})};var tt=class a{static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-customer-product-history"]],decls:2,vars:0,template:function(e,r){e&1&&(i(0,"p"),o(1,"customer-product-history works!"),n())},encapsulation:2})};function ti(a,t){if(a&1&&(o(0),d(1,"phone_format")),a&2){let e=p();c(" , ",_(1,1,e.phoneOther)," ")}}function ii(a,t){if(a&1&&g(0,"app-customer-pet",24),a&2){let e=p();f("id",e.customerId)}}function ni(a,t){if(a&1&&g(0,"app-customer-service-history",24),a&2){let e=p();f("id",e.customerId)}}function ri(a,t){if(a&1&&g(0,"app-customer-product-history",24),a&2){let e=p();f("id",e.customerId)}}function ai(a,t){if(a&1&&g(0,"app-customer-about",24),a&2){let e=p();f("id",e.customerId)}}var it=class a{customerId=null;name;phone;phoneOther;lastedDate;createdDate;translate=v(R);route=v(Ee);memberService=v(B);ngOnInit(){this.route.paramMap.subscribe(t=>{this.customerId=t.get("id"),this.customerId&&this.getData()})}getData(){this.memberService.getCustomerId(Number(this.customerId)).pipe(E(t=>{this.name=t.data?.name??"",this.phone=t.data?.phone??"",this.phoneOther=t.data?.phoneOther??"",this.lastedDate=t.data?.lastedDate??"",this.createdDate=t.data?.createdDate??""}),S(t=>C(()=>t))).subscribe()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-customer-detail"]],decls:65,vars:23,consts:[["nav","ngbNav"],[3,"title","titleLink","subtitle"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"align-items-center"],[1,"hando-main-sections"],[1,"hando-profile-main"],["src","assets/images/users/customer.png","alt","image profile",1,"rounded-circle","img-fluid","avatar-xxl","img-thumbnail","float-start"],[1,"overflow-hidden","ms-md-4","ms-0"],[1,"m-0","text-dark","fs-28","mt-2","mt-md-0"],[1,"my-1","text-muted","fs-15"],[1,"fs-15"],[1,"card-body","pt-0"],["ngbNav","","id","pills-tab","role","tablist",1,"nav","nav-underline","border-bottom","pt-2"],["ngbNavItem","","role","presentation",1,"nav-item"],["ngbNavLink","","id","customer_pet_tab","data-bs-toggle","tab","href","#customer_pet","role","tab",1,"nav-link","p-2"],[1,"d-block","d-sm-none"],[1,"d-none","d-sm-block"],["ngbNavContent",""],["ngbNavItem","",1,"nav-item"],["ngbNavLink","","id","customer_about_tab","data-bs-toggle","tab","href","#customer_about","role","tab",1,"nav-link","p-2"],[1,"tab-content","text-muted","bg-white",3,"ngbNavOutlet"],[3,"id"]],template:function(e,r){if(e&1&&(g(0,"breadcrumb",1),i(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8),g(8,"img",9),n(),i(9,"div",10)(10,"h4",11),o(11),n(),i(12,"p",12),o(13),d(14,"phone_format"),x(15,ti,2,3),o(16," ) "),n(),i(17,"span",13),o(18),d(19,"translate"),i(20,"span"),o(21),d(22,"date_full"),n()(),g(23,"br"),i(24,"span",13),o(25),d(26,"translate"),i(27,"span"),o(28),d(29,"date_full"),n()()()()()()()()(),i(30,"div",2)(31,"div",3)(32,"div",4)(33,"div",14)(34,"ul",15,0)(36,"li",16)(37,"a",17)(38,"span",18),o(39,"Pets"),n(),i(40,"span",19),o(41,"Pets"),n()(),x(42,ii,1,1,"ng-template",20),n(),i(43,"li",21)(44,"a",22)(45,"span",18),o(46,"Service"),n(),i(47,"span",19),o(48,"Service"),n()(),x(49,ni,1,1,"ng-template",20),n(),i(50,"li",21)(51,"a",22)(52,"span",18),o(53,"Product"),n(),i(54,"span",19),o(55,"Product"),n()(),x(56,ri,1,1,"ng-template",20),n(),i(57,"li",21)(58,"a",22)(59,"span",18),o(60,"About"),n(),i(61,"span",19),o(62,"About"),n()(),x(63,ai,1,1,"ng-template",20),n()(),g(64,"div",23),n()()()()),e&2){let l=Ce(35);f("title","Customers")("titleLink","/member/customers")("subtitle","Detail"),m(11),y(r.name),m(2),c(" ( ",_(14,11,r.phone)," "),m(2),w(r.phoneOther&&r.phoneOther.length>0?15:-1),m(3),c("",_(19,13,"lastVisitDate")," : "),m(3),c("",oe(22,15,r.lastedDate,r.translate.currentLang)," "),m(4),c("",_(26,18,"registerDate")," : "),m(3),c("",oe(29,20,r.createdDate,r.translate.currentLang)," "),m(36),f("ngbNavOutlet",l)}},dependencies:[O,Ve,Ie,Pe,De,Te,Fe,Ne,Me,Xe,Ze,et,tt,ue,_e,A,$],encapsulation:2})};var oi=["standardModal"],ht=a=>({"is-invalid":a});function li(a,t){a&1&&o(0," - ")}function mi(a,t){if(a&1&&o(0),a&2){let e=p(2);D(" ",e.petDetail.typeNameTh||"-",", ",e.petDetail.breedNameTh||"-"," ")}}function si(a,t){if(a&1&&o(0),a&2){let e=p(2);D(" ",e.petDetail.typeNameEn||"-",", ",e.petDetail.breedNameEn||"-"," ")}}function pi(a,t){if(a&1&&x(0,mi,1,2)(1,si,1,2),a&2){let e=p();w(e.locale()==="th"?0:1)}}function di(a,t){if(a&1&&(o(0),d(1,"translate")),a&2){let e=p();D(" ",e.petDetail.ageYear," ",_(1,2,"year")," ")}}function ci(a,t){if(a&1&&(o(0),d(1,"translate")),a&2){let e=p();D(" ",e.petDetail.ageMonth," ",_(1,2,"month")," ")}}function ui(a,t){a&1&&o(0," - ")}function _i(a,t){if(a&1&&o(0),a&2){let e=p();c(" ",e.petDetail.genderTh||"-"," ")}}function gi(a,t){if(a&1&&o(0),a&2){let e=p();c(" ",e.petDetail.genderEn||"-"," ")}}function fi(a,t){if(a&1&&(o(0),d(1,"translate")),a&2){let e=p();D(" ",e.petDetail.weight," ",_(1,2,"kg")," ")}}function hi(a,t){a&1&&o(0," - ")}function bi(a,t){}function vi(a,t){}function xi(a,t){if(a&1&&(i(0,"div",62),o(1),n()),a&2){let e=t.item,r=p(2);m(),c(" ",r.locale()==="th"?e.value_th:e.value_en," ")}}function Ci(a,t){if(a&1&&g(0,"img",64),a&2){let e=p().item;f("src",e.image_url,ve)}}function Si(a,t){if(a&1&&(i(0,"div",62),x(1,Ci,1,1,"img",63),o(2),n()),a&2){let e=t.item,r=p(2);m(),f("ngIf",e.image_url),m(),c(" ",r.locale()==="th"?e.value_th:e.value_en," ")}}function yi(a,t){if(a&1){let e=I();i(0,"div",28)(1,"h1",29),o(2,"Add pet"),n(),i(3,"button",30),u("click",function(){h(e);let l=p();return b(l.modalclose())}),n()(),i(4,"div",31)(5,"form",32)(6,"div",33)(7,"label",34),o(8,"Name "),i(9,"span",35),o(10,"*"),n()(),g(11,"input",36),i(12,"div",37),o(13),n()(),i(14,"div",33)(15,"label",38),o(16,"Type"),n(),i(17,"ng-select",39),u("change",function(l){h(e);let s=p();return b(s.onTypeChange(l))}),x(18,xi,2,1,"ng-template",40),n()(),i(19,"div",33)(20,"label",41),o(21,"Breed"),n(),i(22,"ng-select",42),x(23,Si,3,2,"ng-template",40),n()(),i(24,"div",33)(25,"label",43),o(26),d(27,"translate"),n(),i(28,"div",44),g(29,"input",45),i(30,"label",46),o(31),d(32,"translate"),n()(),i(33,"div",44),g(34,"input",47),i(35,"label",48),o(36),d(37,"translate"),n()()(),i(38,"div",33)(39,"label",49),o(40,"Age"),n(),i(41,"div",50)(42,"div",51)(43,"input",52),u("keydown",function(l){h(e);let s=p();return b(s.validateNumber(l))}),n(),i(44,"span",53),o(45),d(46,"translate"),n()(),i(47,"div",51)(48,"input",54),u("keydown",function(l){h(e);let s=p();return b(s.validateNumber(l))}),n(),i(49,"span",55),o(50),d(51,"translate"),n(),i(52,"div",37),o(53),n()()()(),i(54,"div",33)(55,"label",56),o(56,"Weight"),n(),i(57,"div",50)(58,"div",51)(59,"input",57),u("keydown",function(l){h(e);let s=p();return b(s.validateNumber(l,!0))}),n(),i(60,"span",58),o(61),d(62,"translate"),n()()()()()(),i(63,"div",59)(64,"button",60),u("click",function(){h(e);let l=p();return b(l.save())}),o(65,"Save"),n(),i(66,"button",61),u("click",function(){h(e);let l=p();return b(l.modalclose())}),o(67," Close "),n()()}if(a&2){let e=p();m(5),f("formGroup",e.petForm),m(6),f("ngClass",T(27,ht,e.submit&&e.form.name.errors)),m(2),y(e.nameError),m(4),f("items",e.petTypeList)("searchable",!0),m(5),f("items",e.filteredBreedList)("searchable",!0),m(4),y(_(27,15,"gender")),m(5),c(" ",_(32,17,"pet_male")," "),m(5),c(" ",_(37,19,"pet_female")," "),m(9),c(" ",_(46,21,"year")," "),m(3),f("ngClass",T(29,ht,e.submit&&e.form.ageMonth.errors)),m(2),c(" ",_(51,23,"month")," "),m(3),y(e.ageMonthError),m(8),c(" ",_(62,25,"kg")," ")}}var nt=class a{petService=v(fe);route=v(Ee);translate=v(R);localeService=v(ge);router=v(L);modalService=v(ce);formBuilder=v(ie);masterService=v(Ye);locale=this.localeService.getLocale();petId=null;petDetail={};petForm;submit;selectType;nameError;breedList=[];petTypeList=[];filteredBreedList=[];standardModal;ageMonthError;ngOnInit(){this.route.paramMap.subscribe(t=>{this.petId=t.get("id"),this.petId&&this.getData()}),this.loadPetTypes(),this.loadAllBreeds()}get form(){return this.petForm.controls}getData(){this.petId&&this.petService.getPetId(Number(this.petId)).pipe(E(t=>{this.petDetail=t.data}),S(t=>C(()=>t))).subscribe()}goToEditPet(){this.petId&&(this.openModal(),this.petForm.patchValue({}))}goToCustomer(){this.petDetail.customerId&&this.router.navigate(["/member/customers/detail",this.petDetail.customerId])}openModal(){this.petForm=this.formBuilder.group({name:[this.petDetail.name,[P.required]],ageYear:[this.petDetail.ageYear],ageMonth:[this.petDetail.ageMonth,[P.max(11)]],gender:[this.petDetail.gender],type:[this.petDetail.typeId],breed:[this.petDetail.breedId],weight:[this.petDetail.weight]}),this.filteredBreedList=this.breedList.filter(t=>t.ref_key===this.petDetail.typeId),this.sortBreeds(),this.modalService.open(this.standardModal,{centered:!0})}modalclose(){this.modalService.dismissAll(),this.petForm.reset(),this.submit=!1}onTypeChange(t){t?(this.filteredBreedList=this.breedList.filter(e=>e.ref_key===t.key),this.sortBreeds()):this.filteredBreedList=[],this.petForm.get("breed")?.setValue("")}sortPetTypes(){this.petTypeList.sort((t,e)=>this.locale()==="th"?t.value_th.localeCompare(e.value_th):t.value_en.localeCompare(e.value_en)).map(t=>{t.label=this.locale()==="th"?t.value_th:t.value_en})}sortBreeds(){this.breedList.sort((t,e)=>this.locale()==="th"?t.value_th.localeCompare(e.value_th):t.value_en.localeCompare(e.value_en)).map(t=>{t.label=this.locale()==="th"?t.value_th:t.value_en})}loadPetTypes(){this.masterService.getPetTypes().pipe(E(t=>{this.petTypeList=t.data??[],this.sortPetTypes()}),S(t=>C(()=>t))).subscribe()}loadAllBreeds(){this.masterService.getPetBreeds().pipe(E(t=>{this.breedList=t.data??[],this.sortBreeds()}),S(t=>C(()=>t))).subscribe()}save(){if(this.submit=!0,this.petForm.invalid){this.nameError=this.translate.instant("error.require.name"),this.ageMonthError=this.translate.instant("error.validate.age_month_max"),this.petForm.markAllAsTouched();return}let t={id:this.petDetail.id,name:this.petForm.get("name")?.value,ageYear:Number(this.petForm.get("ageYear")?.value),ageMonth:Number(this.petForm.get("ageMonth")?.value),gender:this.petForm.get("gender")?.value,type:Number(this.petForm.get("type")?.value),breed:Number(this.petForm.get("breed")?.value),customerId:Number(this.petDetail.customerId),weight:this.petForm.get("weight")?.value};this.petService.updatePet(t).pipe(E(e=>{this.getData(),this.modalclose()}),S(e=>C(()=>e))).subscribe()}validateNumber(t,e=!1){let r=["Backspace","ArrowLeft","ArrowRight","Tab","Enter"];if(e){!/^[0-9.]$/.test(t.key)&&!r.includes(t.key)&&t.preventDefault();let s=t.key===".",he=t.target;s&&he.value.includes(".")&&t.preventDefault()}else!/^[0-9]$/.test(t.key)&&!r.includes(t.key)&&t.preventDefault()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=k({type:a,selectors:[["app-pet-detail"]],viewQuery:function(e,r){if(e&1&&Y(oi,5),e&2){let l;U(l=q())&&(r.standardModal=l.first)}},decls:76,vars:34,consts:[["nav","ngbNav"],["standardModal",""],[3,"title","titleLink","subtitle"],[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"align-items-center"],[1,"hando-main-sections"],[1,"hando-profile-main"],["src","assets/images/users/customer.png","alt","image profile",1,"rounded-circle","img-fluid","avatar-xxl","img-thumbnail","float-start"],[1,"overflow-hidden","ms-md-4","ms-0"],[1,"m-0","text-dark","fs-28","mt-2","mt-md-0"],[1,"text-dark","fs-15","mt-2","mt-md-0"],[1,"text-link",3,"click"],[1,"fs-15"],["type","button",1,"btn","btn-warning","btn-sm","mt-2",3,"click"],[1,"card-body","pt-0"],["ngbNav","","id","pills-tab","role","tablist",1,"nav","nav-underline","border-bottom","pt-2"],["ngbNavItem","","role","presentation",1,"nav-item"],["ngbNavLink","","id","customer_about_tab","data-bs-toggle","tab","href","#customer_about","role","tab",1,"nav-link","p-2"],[1,"d-block","d-sm-none"],[1,"mdi","mdi-sitemap-outline"],[1,"d-none","d-sm-block"],["ngbNavContent",""],["ngbNavItem","",1,"nav-item"],[1,"tab-content","text-muted","bg-white",3,"ngbNavOutlet"],["tabindex","-1","role","dialog","aria-labelledby","standard-modalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-header"],["id","standard-modalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["novalidate","",1,"row","g-3","needs-validation",3,"formGroup"],[1,"col-md-12"],["for","nameInput",1,"form-label"],[1,"text-danger"],["formControlName","name","type","text","id","nameInput","required","",1,"form-control","form-control-lg",3,"ngClass"],[1,"invalid-feedback"],["for","typeInput",1,"form-label"],["bindLabel","label","bindValue","key","formControlName","type",3,"change","items","searchable"],["ng-option-tmp",""],["for","breedInput",1,"form-label"],["bindLabel","label","bindValue","key","formControlName","breed",3,"items","searchable"],["for","genderInput",1,"form-label"],[1,"form-check","radio-lg"],["type","radio","formControlName","gender","id","genderRadios1","value","MALE",1,"form-check-input"],["for","genderRadios1",1,"form-check-label"],["type","radio","formControlName","gender","id","genderRadios2","value","FEMALE",1,"form-check-input"],["for","genderRadios2",1,"form-check-label"],["for","ageInput",1,"form-label"],[1,"d-flex","gap-3"],[1,"input-group"],["formControlName","ageYear","type","text","aria-label","ageYear","aria-describedby","ageYearSpan","id","ageInput",1,"form-control","form-control-lg",3,"keydown"],["id","ageYearSpan",1,"input-group-text"],["formControlName","ageMonth","type","text","aria-label","ageMonth","aria-describedby","ageMonthSpan","id","ageMonthInput",1,"form-control","form-control-lg",3,"keydown","ngClass"],["id","ageMonthSpan",1,"input-group-text"],["for","weightInput",1,"form-label"],["formControlName","weight","type","text","aria-label","weight","aria-describedby","weightSpan","id","weightInput",1,"form-control","form-control-lg",3,"keydown"],["id","weightSpan",1,"input-group-text"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light",3,"click"],[1,"option-content"],["width","100","height","100","class","me-2 rounded-circle",3,"src",4,"ngIf"],["width","100","height","100",1,"me-2","rounded-circle",3,"src"]],template:function(e,r){if(e&1){let l=I();g(0,"breadcrumb",2),i(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"div",8)(7,"div",9),g(8,"img",10),n(),i(9,"div",11)(10,"h4",12),o(11),i(12,"h5",13)(13,"a",14),u("click",function(){return h(l),b(r.goToCustomer())}),o(14),d(15,"phone_format"),n()()(),i(16,"span",15),o(17),d(18,"translate"),i(19,"span"),x(20,li,1,0)(21,pi,2,1),n()(),g(22,"br"),i(23,"span",15),o(24),d(25,"translate"),i(26,"span"),x(27,di,2,4)(28,ci,2,4)(29,ui,1,0),n()(),g(30,"br"),i(31,"span",15),o(32),d(33,"translate"),i(34,"span"),x(35,_i,1,1)(36,gi,1,1),n()(),g(37,"br"),i(38,"span",15),o(39),d(40,"translate"),x(41,fi,2,4)(42,hi,1,0),n(),g(43,"br"),i(44,"span",15),o(45),d(46,"translate"),i(47,"span"),o(48),d(49,"date_full"),n()(),g(50,"br"),i(51,"button",16),u("click",function(){return h(l),b(r.goToEditPet())}),o(52," \u0E41\u0E01\u0E49\u0E44\u0E02 "),n()()()()()()()(),i(53,"div",3)(54,"div",4)(55,"div",5)(56,"div",17)(57,"ul",18,0)(59,"li",19)(60,"a",20)(61,"span",21),g(62,"i",22),n(),i(63,"span",23),o(64,"Service History"),n()(),x(65,bi,0,0,"ng-template",24),n(),i(66,"li",25)(67,"a",20)(68,"span",21),g(69,"i",22),n(),i(70,"span",23),o(71,"Photo"),n()(),x(72,vi,0,0,"ng-template",24),n()(),g(73,"div",26),n()()()(),x(74,yi,68,31,"ng-template",27,1,pe)}if(e&2){let l=Ce(58);f("title","Pets")("titleLink","/member/pets")("subtitle","Detail"),m(11),c(" ",r.petDetail.name," "),m(3),D("( ",r.petDetail.customerName," ",_(15,19,r.petDetail.customerPhone)," )"),m(3),c("",_(18,21,"breed")," : "),m(3),w(r.petDetail.typeId?21:20),m(4),c("",_(25,23,"age")," : "),m(3),w(r.petDetail.ageYear&&r.petDetail.ageYear>0?27:-1),m(),w(r.petDetail.ageMonth&&r.petDetail.ageMonth>0?28:-1),m(),w(!r.petDetail.ageYear&&!r.petDetail.ageMonth?29:-1),m(3),c("",_(33,25,"gender")," : "),m(3),w(r.locale()==="th"?35:36),m(4),c("",_(40,27,"weight")," : "),m(2),w(r.petDetail.weight?41:42),m(4),c("",_(46,29,"lastVisitDate")," : "),m(3),c("",oe(49,31,r.petDetail.lastedServiceDate,r.translate.currentLang)," "),m(25),f("ngbNavOutlet",l)}},dependencies:[O,Ve,Ie,Pe,De,Te,Fe,Ne,Me,_e,ue,A,$,K,N,Q,ye,ne,J,F,ke,M,X,te,Z,ee,We,qe,Ue,V],encapsulation:2})};var zr=[{path:"register",component:je,data:{title:"Register"}},{path:"customers",component:He,data:{title:"Customers"}},{path:"customers/detail/:id",component:it,data:{title:"Customer Detail"}},{path:"pets",component:Ke,data:{title:"Pets"}},{path:"pets/detail/:id",component:nt,data:{title:"Pet Detail"}}];export{zr as MEMBERS_ROUTES};
